<?xml version="1.0" encoding="utf-8"?>
<odoo>

    <!--Action Definition-->
    <record id="action_import_approval" model="ir.actions.client">
        <field name="name">Employees Import</field>
        <field name="tag">import</field>
        <field name="params">{ 'model': 'approval.request' }</field>
    </record>

    <record id="approval_inherit_form" model="ir.ui.view">
        <field name="active" eval="True"/>
        <field name="arch" type="xml">
            <data>
                <xpath expr="//button[@name='action_cancel']" position="after">
                    <button name="%(action_import_approval)d" string="Import Approvals Data" type="action"/>
                    <button name="create_event" string="Crear evento" type="object" class="btn-primary" attrs="{'invisible':['|',('x_evento', '!=', False),('request_status','not in',['approved'])]}" style="background: #ff0000; color: white;" />
                </xpath>
                <xpath expr="//button[@name='create_event']" position="attributes">
                    <attribute name="effect">{"message":"EVENTO CREADO!","fadeout":"medium"}</attribute>
                </xpath>
                <xpath expr="//form[1]/sheet[1]/div[2]" position="after">
                    <group name="group_lineamientos_y_logistica" attrs="{'invisible': [['category_id','!=',9], ]}"
                           style="color: red;">
                        <group name="group_lineamientos" string="Lea el siguiente lineamiento">
                            <field name="x_lineamiento" string="Lineamiento" force_save="True" attrs="{}" readonly="1"/>
                            <field name="x_estoy_de_acuerdo" attrs="{'required': [['category_id','=',9]]}"/>
                        </group>
                        <group name="group_logistica" string="Logistica del evento" attrs="{'invisible': [['request_status','!=','approved']]}" style="color: blue;">
                            <field name="x_cordinador" string="Coordindor" domain="[['department_id.name','=','Comunicación']]" attrs="{'invisible': [['request_status','!=','approved']]}"/>
                            <field name="x_brigadista" string="Brigadista" attrs="{'invisible': [['request_status','!=','approved']]}" domain="['|',['department_id.name','=','Comunicación'],['department_id.name','=','Servicios Generales y Recursos Materiales']]"/>
                        </group>
                    </group>
                </xpath>
                <xpath expr="//field[@name='request_owner_id']" position="attributes">
                    <attribute name="attrs">{"invisible": [["request_status","=","new"]]}</attribute>
                    <attribute name="force_save">True</attribute>
                    <attribute name="readonly">1</attribute>
                    <attribute name="string">Solicitante</attribute>
                </xpath>
                <xpath expr="//field[@name='request_owner_id']" position="after">
                    <field name="create_date" string="Fecha de solicitud" attrs="{'invisible': [['create_date','=',False]]}"/>
                </xpath>
                <xpath expr="//field[@name='category_id']" position="attributes">
                    <attribute name="attrs">{"readonly": True}</attribute>
                    <attribute name="force_save">True</attribute>
                    <attribute name="invisible">1</attribute>
                </xpath>
                <xpath expr="//field[@name='date_confirmed']" position="attributes">
                    <attribute name="attrs">{"invisible": [["date_confirmed","=",False]]}</attribute>
                </xpath>
                <xpath expr="//field[@name='items']" position="before">
                    <field name="x_evento" attrs="{'invisible': [['x_evento','=',False]]}" force_save="True" readonly="1"/>
                    <field name="x_evento_creado" string="Evento creado el" attrs="{'invisible': [['x_evento_creado','=',False]]}" force_save="True" readonly="1"/>
                </xpath>
                <xpath expr="//form[1]/sheet[1]/group[not(@name)][1]" position="after">
                    <group name="group_datos_del_evento" string="Datos del evento" attrs="{'invisible': ['|', ['category_id','!=',9], '&amp;' ,['x_estoy_de_acuerdo','!=','si']]}">
                        <field name="x_nombre_del_evento" string="Nombre del evento" attrs="{'required': [['category_id','=',9]]}"/>
                        <field name="x_objetivo" string="Objetivo" attrs="{'required': [['category_id','=',9]]}"/>
                        <field name="x_organizadores" widget="many2many_tags" string="Organizadores" attrs="{'required': [['category_id','=',9]]}" domain="[['is_company','=',True]]"/>
                    </group>
                    <group name="group_logistica_de_evento" attrs="{'invisible': ['|', ['category_id','!=',9], '&amp;' ,['x_estoy_de_acuerdo','!=','si']]}">
                        <group name="fecha_de_evento" string="Fecha del evento">
                            <field name="x_tipo_del_evento" string="Tipo de evento" attrs="{'required': [['category_id','=',9]]}"/>
                            <field name="x_inicio_del_evento" string="Inicio del evento" widget="daterange" options="{'related_end_date':'x_fin_del_evento'}" attrs="{'required': [['category_id','=',9]]}"/>
                            <field name="x_fin_del_evento" string="Fin del evento" widget="datetime" force_save="True" attrs="{}" readonly="1"/>
                        </group>
                        <group name="group_personas_proyectadas" string="Personas proyectadas">
                            <field name="x_cantidad" string="Cantidad" attrs="{'required': [['category_id','=',9]]}"/>
                        </group>
                    </group>
                    <group name="group_encargados_de_evento" attrs="{'invisible': ['|', ['category_id','!=',9], '&amp;' ,['x_estoy_de_acuerdo','!=','si']]}">
                        <group name="group_host_evento" string="Host PSM">
                            <field name="x_colaborador" string="Colaborador" attrs="{'required': [['category_id','=',9]]}"/>
                            <field name="x_departamento" string="Departamento"/>
                        </group>
                        <group name="group_encargado_externo" string="Encargado externo">
                            <field name="x_encargado_externo" string="Nombre" domain="[['is_company','!=',True]]"/>
                            <field name="x_correo_electronico" string="Correo electronico"/>
                            <field name="x_movil" string="Movil"/>
                        </group>
                    </group>
                    <group name="group_catering" attrs="{'invisible': ['|', ['category_id','!=',9], '&amp;' ,['x_estoy_de_acuerdo','!=','si']]}">
                        <field name="x_quien_paga_el_evento" string="Quien paga el evento" attrs="{'required': [['category_id','=',9]]}"/>
                        <field name="x_porcentaje_que_paga_psm" string="Porcentaje que paga PSM" attrs="{'invisible': [['x_quien_paga_el_evento','!=','Ambos']]}"/>
                        <field name="x_requiere_servicio_de_catering" string="Requiere servicio de catering" attrs="{'required': [['category_id','=',9]]}"/>
                    </group>
                </xpath>
            </data>
        </field>
        <field name="field_parent" eval="False"/>
        <field name="groups_id" eval="[(6, 0, [])]"/>
        <field name="inherit_id" ref="approvals.approval_request_view_form"/>
        <field name="key" eval="False"/>
        <field name="mode">extension</field>
        <field name="model">approval.request</field>
        <field name="name">approval.request.view.form.inherit</field>
        <field name="priority">99</field>
        <field name="type">form</field>
    </record>

</odoo>
